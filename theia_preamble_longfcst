#PBS -l nodes=20:ppn=24
#PBS -l walltime=2:00:00
#PBS -A gsienkf
##PBS -A hybrid   
##PBS -q debug
#PBS -N longfcst
#PBS -S /bin/bash
#PBS -o longfcst.stdout
#PBS -e longfcst.stderr
export NODES=20
export corespernode=24
export machine='theia'
export quilting=".false."

if [ $NODES -eq 20 ]; then
  if [ $quilting == ".true." ]; then
  export control_threads=2
  export control_proc=444
  export write_groups_ctl=1 # write groups for control forecast.
  export layout_ctl="6,6" # layout_x,layout_y (total # mpi tasks = $layout_x*$layout_y*6=($fg_proc/$fg_threads) - $write_tasks*$write_groups)
  else
  export control_threads=2
  export control_proc=480
  export layout_ctl="4,10"
  fi
else
  echo "processor layout for $NODES nodes not set"
  exit 1
fi
